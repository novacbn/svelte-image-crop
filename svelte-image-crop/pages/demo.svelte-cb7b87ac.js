import{S as t,i as e,s as n,t as r,g as a,f as s,h as o,d as i,e as l,k as c,c as u,a as d,n as f,b as h,G as p,J as $,L as m,M as g,N as v,O as b,l as y,v as x,r as w,j as E,m as L,o as _,w as k,P as B}from"../chunks/vendor-503fed67.js";async function D(t,e){const{x:n,y:r,width:a,height:s}=e,o=await createImageBitmap(t,n,r,a,s);return t=await function(t,e,n=1){return new Promise(((r,a)=>{const s=document.createElement("canvas"),o=s.getContext("bitmaprenderer");o?(s.width=t.width,s.height=t.height,o.transferFromImageBitmap(t),s.toBlob((t=>{t?r(t):a(new Error("bad dispatch to 'to_blob' (failed to convert to blob)")),s.remove()}),e,n)):a(new Error("bad dispatch to 'to_blob' (context of 'bitmaprendered' unretrievable)"))}))}(o,t.type),o.close(),t}function T(t,e){const{left:n,right:r,top:a,bottom:s}=e?I(t,e):t;return{x:n,y:a,width:r-n,height:s-a}}function I(t,e){const{x:n,y:r}=t,{x:a,y:s}=e;return{left:Math.min(n,a),right:Math.max(n,a),top:Math.min(r,s),bottom:Math.max(r,s)}}function R(t,e,n){const r=n.x/t.width,a=n.y/t.height;return{x:e.width*r,y:e.height*a}}function O(t){let e,n,l,c,u=t[4].width.toFixed()+"",d=t[4].height.toFixed()+"";return{c(){e=r(u),n=r("x"),l=r(d),c=r("px")},l(t){e=a(t,u),n=a(t,"x"),l=a(t,d),c=a(t,"px")},m(t,r){s(t,e,r),s(t,n,r),s(t,l,r),s(t,c,r)},p(t,n){16&n&&u!==(u=t[4].width.toFixed()+"")&&o(e,u),16&n&&d!==(d=t[4].height.toFixed()+"")&&o(l,d)},d(t){t&&i(e),t&&i(n),t&&i(l),t&&i(c)}}}function U(t){let e,n,r,a,o,m,g,v,b,y,x,w=t[4]&&O(t);return{c(){e=l("div"),n=l("img"),a=c(),o=l("div"),m=l("img"),v=c(),b=l("div"),w&&w.c(),this.h()},l(t){e=u(t,"DIV",{class:!0,"data-cropping":!0,"data-dragging":!0,style:!0});var r=d(e);n=u(r,"IMG",{class:!0,src:!0}),a=f(r),o=u(r,"DIV",{class:!0});var s=d(o);m=u(s,"IMG",{style:!0,src:!0,class:!0}),v=f(s),b=u(s,"DIV",{class:!0,style:!0});var l=d(b);w&&w.l(l),l.forEach(i),s.forEach(i),r.forEach(i),this.h()},h(){h(n,"class","image-crop-background svelte-2hnqv"),n.src!==(r=t[0])&&h(n,"src",r),h(m,"style",t[6]),m.src!==(g=t[0])&&h(m,"src",g),h(m,"class","svelte-2hnqv"),h(b,"class","image-crop-selection svelte-2hnqv"),h(b,"style",t[7]),h(o,"class","image-crop-preview svelte-2hnqv"),h(e,"class","image-crop svelte-2hnqv"),h(e,"data-cropping",y=!!t[2]||void 0),h(e,"data-dragging",x=!!t[3]||void 0),h(e,"style",t[5])},m(r,i){s(r,e,i),p(e,n),t[16](n),p(e,a),p(e,o),p(o,m),p(o,v),p(o,b),w&&w.m(b,null)},p(t,[a]){1&a&&n.src!==(r=t[0])&&h(n,"src",r),64&a&&h(m,"style",t[6]),1&a&&m.src!==(g=t[0])&&h(m,"src",g),t[4]?w?w.p(t,a):(w=O(t),w.c(),w.m(b,null)):w&&(w.d(1),w=null),128&a&&h(b,"style",t[7]),4&a&&y!==(y=!!t[2]||void 0)&&h(e,"data-cropping",y),8&a&&x!==(x=!!t[3]||void 0)&&h(e,"data-dragging",x),32&a&&h(e,"style",t[5])},i:$,o:$,d(n){n&&i(e),t[16](null),w&&w.d()}}}const P="STATE_CROPPED",F="STATE_DEFAULT",M=t=>`${t.x}px ${t.y}px`;function j(t,e,n){let r,a,s,o;const i=m();let l,c,u,d,f,h=!1,p=null,$=null,{src:v}=e;function b(){n(3,h=!1),p&&$&&$.x===p.x&&$.y===p.y&&(n(12,$=null),n(11,p=null))}function y(t){n(3,h=!0),n(12,$=t),n(11,p=t)}function x(t){n(11,p=t)}return t.$$set=t=>{"src"in t&&n(0,v=t.src)},t.$$.update=()=>{if(6144&t.$$.dirty&&n(2,r=!(!p||!$)),14340&t.$$.dirty){const t=c;n(13,c=r?I($,p):null),typeof t==typeof c&&(null==t?void 0:t.bottom)===(null==c?void 0:c.bottom)&&(null==t?void 0:t.left)===(null==c?void 0:c.left)&&(null==t?void 0:t.right)===(null==c?void 0:c.right)&&(null==t?void 0:t.top)===(null==c?void 0:c.top)||i("state",{state:null===c?F:P})}var e;if(8192&t.$$.dirty&&n(15,a=c?T(c):null),8192&t.$$.dirty&&n(6,s=c?(t=>{const{bottom:e,left:n,right:r,top:a}=t,s=M({x:n,y:a}),o=M({x:r,y:a});return`clip-path: polygon(${s}, ${M({x:n,y:e})}, ${M({x:r,y:e})}, ${o});`})(c):""),32768&t.$$.dirty&&n(7,o=a?`left:${(e=a).x}px;top:${e.y}px;width:${e.width}px;height:${e.height}px;`:""),6146&t.$$.dirty)if(l&&p&&$){const t={width:l.width,height:l.height},e={width:l.naturalWidth,height:l.naturalHeight};n(4,u=T(R(t,e,$),R(t,e,p)))}else n(4,u=null);16386&t.$$.dirty&&l&&(d&&(d.destroy(),n(14,d=null)),n(14,d=function(t,e={}){let{on_end:n,on_start:r,on_update:a}=e,s=!1;function o(e){if("touchmove"===e.type||"touchstart"===e.type){const n=t.getBoundingClientRect(),r=e.touches[0];return{x:r.clientX-n.x,y:r.clientY-n.y}}return{x:e.offsetX,y:e.offsetY}}function i(t){t.preventDefault(),s=!0,r&&r(o(t))}function l(t){t.preventDefault(),s=!1,n&&n()}function c(t){t.preventDefault(),s&&a&&a(o(t))}function u(t){s=!1}return t.addEventListener("touchstart",i),t.addEventListener("mousedown",i),t.addEventListener("touchend",l),t.addEventListener("mouseup",l),t.addEventListener("touchmove",c),t.addEventListener("mousemove",c),t.addEventListener("mouseleave",u),{destroy(){t.removeEventListener("touchstart",i),t.removeEventListener("mousedown",i),t.removeEventListener("touchend",l),t.removeEventListener("mouseup",l),t.removeEventListener("touchmove",c),t.removeEventListener("mousemove",c),t.removeEventListener("mouseleave",u)},update(t={}){({on_end:n,on_start:r,on_update:a}=t)}}}(l,{on_end:b,on_start:y,on_update:x}))),2&t.$$.dirty&&(l?l.addEventListener("load",(()=>n(5,f=l?`max-height:${l.height}px;`:""))):n(5,f=""))},[v,l,r,h,u,f,s,o,async function(){const t=await fetch(v),e=await t.blob();return r?D(e,u):e},function(){return r},function(){n(11,p=null),n(12,$=null)},p,$,c,d,a,function(t){g[t?"unshift":"push"]((()=>{l=t,n(1,l)}))}]}class C extends t{constructor(t){super(),e(this,t,j,U,n,{src:0,get_cropped_blob:8,is_cropping:9,reset:10})}get get_cropped_blob(){return this.$$.ctx[8]}get is_cropping(){return this.$$.ctx[9]}get reset(){return this.$$.ctx[10]}}function N(t){let e,n,m,g,y,x,w;return{c(){e=l("label"),n=l("code"),m=r(t[0]),g=c(),y=l("input"),this.h()},l(r){e=u(r,"LABEL",{});var s=d(e);n=u(s,"CODE",{});var o=d(n);m=a(o,t[0]),o.forEach(i),g=f(s),y=u(s,"INPUT",{type:!0}),s.forEach(i),this.h()},h(){h(y,"type","text")},m(r,a){s(r,e,a),p(e,n),p(n,m),p(e,g),p(e,y),v(y,t[1]),x||(w=b(y,"input",t[3]),x=!0)},p(t,[e]){1&e&&o(m,t[0]),2&e&&y.value!==t[1]&&v(y,t[1])},i:$,o:$,d(t){t&&i(e),x=!1,w()}}}function q(t,e,n){let{default:r}=e,{variable:a}=e,s=r;return t.$$set=t=>{"default"in t&&n(2,r=t.default),"variable"in t&&n(0,a=t.variable)},t.$$.update=()=>{3&t.$$.dirty&&document.body.style.setProperty(a,s)},[a,s,r,function(){s=this.value,n(1,s)}]}class V extends t{constructor(t){super(),e(this,t,q,N,n,{default:2,variable:0})}}function Y(t){let e,n,o;return{c(){e=l("div"),n=l("p"),o=r("Your client currently does not support Javascript, or is otherwise disabled."),this.h()},l(t){e=u(t,"DIV",{class:!0});var r=d(e);n=u(r,"P",{});var s=d(n);o=a(s,"Your client currently does not support Javascript, or is otherwise disabled."),s.forEach(i),r.forEach(i),this.h()},h(){h(e,"class","card")},m(t,r){s(t,e,r),p(e,n),p(n,o)},p:$,i:$,o:$,d(t){t&&i(e)}}}function z(t){let e,n,o,$,m,g,v,y,D,T,I,R,O,U,P,M,j,N,q,Y,z,A,J,S,X,H,K,W,Q,Z,tt,et,nt,rt,at,st,ot,it,lt,ct,ut,dt,ft,ht,pt,$t,mt,gt,vt,bt,yt={src:t[1]};return e=new C({props:yt}),t[7](e),e.$on("state",t[6]),J=new V({props:{variable:"--image-crop-cursor-dragging",default:"crosshair"}}),X=new V({props:{variable:"--image-crop-cursor-hover",default:"se-resize"}}),Q=new V({props:{variable:"--image-crop-background-filter-cropping",default:"blur(1px) brightness(65%)"}}),nt=new V({props:{variable:"--image-crop-selection-border",default:"1px dashed whitesmoke"}}),at=new V({props:{variable:"--image-crop-selection-color",default:"whitesmoke"}}),ot=new V({props:{variable:"--image-crop-selection-filter",default:"drop-shadow(0px 0px 6px black)"}}),ut=new V({props:{variable:"--image-crop-selection-font-family",default:"inherit"}}),ft=new V({props:{variable:"--image-crop-selection-font-size",default:"0.8rem"}}),pt=new V({props:{variable:"--image-crop-selection-font-weight",default:"900"}}),{c(){E(e.$$.fragment),n=c(),o=l("div"),$=l("button"),m=r("reset"),v=c(),y=l("button"),D=r("clear"),I=c(),R=l("button"),O=r("commit"),P=c(),M=l("br"),j=c(),N=l("fieldset"),q=l("legend"),Y=r("Customize"),z=c(),A=l("p"),E(J.$$.fragment),S=c(),E(X.$$.fragment),H=c(),K=l("br"),W=c(),E(Q.$$.fragment),Z=c(),tt=l("br"),et=c(),E(nt.$$.fragment),rt=c(),E(at.$$.fragment),st=c(),E(ot.$$.fragment),it=c(),lt=l("br"),ct=c(),E(ut.$$.fragment),dt=c(),E(ft.$$.fragment),ht=c(),E(pt.$$.fragment),$t=c(),mt=l("br"),this.h()},l(t){L(e.$$.fragment,t),n=f(t),o=u(t,"DIV",{class:!0});var r=d(o);$=u(r,"BUTTON",{class:!0,disabled:!0});var s=d($);m=a(s,"reset"),s.forEach(i),v=f(r),y=u(r,"BUTTON",{class:!0,disabled:!0});var l=d(y);D=a(l,"clear"),l.forEach(i),I=f(r),R=u(r,"BUTTON",{class:!0,disabled:!0});var c=d(R);O=a(c,"commit"),c.forEach(i),r.forEach(i),P=f(t),M=u(t,"BR",{}),j=f(t),N=u(t,"FIELDSET",{});var h=d(N);q=u(h,"LEGEND",{});var p=d(q);Y=a(p,"Customize"),p.forEach(i),z=f(h),A=u(h,"P",{});var g=d(A);L(J.$$.fragment,g),S=f(g),L(X.$$.fragment,g),H=f(g),K=u(g,"BR",{}),W=f(g),L(Q.$$.fragment,g),Z=f(g),tt=u(g,"BR",{}),et=f(g),L(nt.$$.fragment,g),rt=f(g),L(at.$$.fragment,g),st=f(g),L(ot.$$.fragment,g),it=f(g),lt=u(g,"BR",{}),ct=f(g),L(ut.$$.fragment,g),dt=f(g),L(ft.$$.fragment,g),ht=f(g),L(pt.$$.fragment,g),g.forEach(i),h.forEach(i),$t=f(t),mt=u(t,"BR",{}),this.h()},h(){h($,"class","button secondary is-full-width"),$.disabled=g=t[1]===G,h(y,"class","button error is-full-width"),y.disabled=T=t[2]===F,h(R,"class","button primary is-full-width"),R.disabled=U=t[2]===F,h(o,"class","grouped gapless")},m(r,a){_(e,r,a),s(r,n,a),s(r,o,a),p(o,$),p($,m),p(o,v),p(o,y),p(y,D),p(o,I),p(o,R),p(R,O),s(r,P,a),s(r,M,a),s(r,j,a),s(r,N,a),p(N,q),p(q,Y),p(N,z),p(N,A),_(J,A,null),p(A,S),_(X,A,null),p(A,H),p(A,K),p(A,W),_(Q,A,null),p(A,Z),p(A,tt),p(A,et),_(nt,A,null),p(A,rt),_(at,A,null),p(A,st),_(ot,A,null),p(A,it),p(A,lt),p(A,ct),_(ut,A,null),p(A,dt),_(ft,A,null),p(A,ht),_(pt,A,null),s(r,$t,a),s(r,mt,a),gt=!0,vt||(bt=[b($,"click",t[5]),b(y,"click",t[3]),b(R,"click",t[4])],vt=!0)},p(t,n){const r={};2&n&&(r.src=t[1]),e.$set(r),(!gt||2&n&&g!==(g=t[1]===G))&&($.disabled=g),(!gt||4&n&&T!==(T=t[2]===F))&&(y.disabled=T),(!gt||4&n&&U!==(U=t[2]===F))&&(R.disabled=U)},i(t){gt||(x(e.$$.fragment,t),x(J.$$.fragment,t),x(X.$$.fragment,t),x(Q.$$.fragment,t),x(nt.$$.fragment,t),x(at.$$.fragment,t),x(ot.$$.fragment,t),x(ut.$$.fragment,t),x(ft.$$.fragment,t),x(pt.$$.fragment,t),gt=!0)},o(t){w(e.$$.fragment,t),w(J.$$.fragment,t),w(X.$$.fragment,t),w(Q.$$.fragment,t),w(nt.$$.fragment,t),w(at.$$.fragment,t),w(ot.$$.fragment,t),w(ut.$$.fragment,t),w(ft.$$.fragment,t),w(pt.$$.fragment,t),gt=!1},d(r){t[7](null),k(e,r),r&&i(n),r&&i(o),r&&i(P),r&&i(M),r&&i(j),r&&i(N),k(J),k(X),k(Q),k(nt),k(at),k(ot),k(ut),k(ft),k(pt),r&&i($t),r&&i(mt),vt=!1,B(bt)}}}function A(t){let e,n,r,a;const o=[z,Y],l=[];return e=0,n=l[0]=o[0](t),{c(){n.c(),r=y()},l(t){n.l(t),r=y()},m(t,e){l[0].m(t,e),s(t,r,e),a=!0},p(t,[e]){n.p(t,e)},i(t){a||(x(n),a=!0)},o(t){w(n),a=!1},d(t){l[0].d(t),t&&i(r)}}}const G="/assets/images/jung-ho-park-sYiKL1JEOEk-unsplash.jpg";function J(t,e,n){let r,a,s=G,o=F;return[a,s,o,function(t){a.reset()},async function(t){r=await a.get_cropped_blob(),n(1,s=URL.createObjectURL(r)),a.reset()},function(t){s!==G&&URL.revokeObjectURL(s),r=null,n(1,s=G),a.reset()},function(t){n(2,o=t.detail.state)},function(t){g[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}export default class extends t{constructor(t){super(),e(this,t,J,A,n,{})}}
