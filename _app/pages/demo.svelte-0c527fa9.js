import{S as t,i as e,s as r,t as n,g as a,f as s,h as o,d as i,e as l,k as c,c as u,a as d,n as f,b as p,G as h,J as $,L as m,M as g,N as v,O as b,l as x,v as y,r as w,j as E,m as L,o as _,w as k,P as B}from"../chunks/vendor-503fed67.js";import{a as D}from"../chunks/paths-2c73d5fe.js";async function T(t,e){const{x:r,y:n,width:a,height:s}=e,o=await createImageBitmap(t,r,n,a,s);return t=await function(t,e,r=1){return new Promise(((n,a)=>{const s=document.createElement("canvas"),o=s.getContext("bitmaprenderer");o?(s.width=t.width,s.height=t.height,o.transferFromImageBitmap(t),s.toBlob((t=>{t?n(t):a(new Error("bad dispatch to 'to_blob' (failed to convert to blob)")),s.remove()}),e,r)):a(new Error("bad dispatch to 'to_blob' (context of 'bitmaprendered' unretrievable)"))}))}(o,t.type),o.close(),t}function I(t,e){const{left:r,right:n,top:a,bottom:s}=e?R(t,e):t;return{x:r,y:a,width:n-r,height:s-a}}function R(t,e){const{x:r,y:n}=t,{x:a,y:s}=e;return{left:Math.min(r,a),right:Math.max(r,a),top:Math.min(n,s),bottom:Math.max(n,s)}}function O(t,e,r){const n=r.x/t.width,a=r.y/t.height;return{x:e.width*n,y:e.height*a}}function U(t){let e,r,l,c,u=t[4].width.toFixed()+"",d=t[4].height.toFixed()+"";return{c(){e=n(u),r=n("x"),l=n(d),c=n("px")},l(t){e=a(t,u),r=a(t,"x"),l=a(t,d),c=a(t,"px")},m(t,n){s(t,e,n),s(t,r,n),s(t,l,n),s(t,c,n)},p(t,r){16&r&&u!==(u=t[4].width.toFixed()+"")&&o(e,u),16&r&&d!==(d=t[4].height.toFixed()+"")&&o(l,d)},d(t){t&&i(e),t&&i(r),t&&i(l),t&&i(c)}}}function P(t){let e,r,n,a,o,m,g,v,b,x,y,w=t[4]&&U(t);return{c(){e=l("div"),r=l("img"),a=c(),o=l("div"),m=l("img"),v=c(),b=l("div"),w&&w.c(),this.h()},l(t){e=u(t,"DIV",{class:!0,"data-cropping":!0,"data-dragging":!0,style:!0});var n=d(e);r=u(n,"IMG",{class:!0,src:!0}),a=f(n),o=u(n,"DIV",{class:!0});var s=d(o);m=u(s,"IMG",{style:!0,src:!0,class:!0}),v=f(s),b=u(s,"DIV",{class:!0,style:!0});var l=d(b);w&&w.l(l),l.forEach(i),s.forEach(i),n.forEach(i),this.h()},h(){p(r,"class","image-crop-background svelte-3axw2x"),r.src!==(n=t[0])&&p(r,"src",n),p(m,"style",t[6]),m.src!==(g=t[0])&&p(m,"src",g),p(m,"class","svelte-3axw2x"),p(b,"class","image-crop-selection svelte-3axw2x"),p(b,"style",t[7]),p(o,"class","image-crop-preview svelte-3axw2x"),p(e,"class","image-crop svelte-3axw2x"),p(e,"data-cropping",x=!!t[2]||void 0),p(e,"data-dragging",y=!!t[3]||void 0),p(e,"style",t[5])},m(n,i){s(n,e,i),h(e,r),t[16](r),h(e,a),h(e,o),h(o,m),h(o,v),h(o,b),w&&w.m(b,null)},p(t,[a]){1&a&&r.src!==(n=t[0])&&p(r,"src",n),64&a&&p(m,"style",t[6]),1&a&&m.src!==(g=t[0])&&p(m,"src",g),t[4]?w?w.p(t,a):(w=U(t),w.c(),w.m(b,null)):w&&(w.d(1),w=null),128&a&&p(b,"style",t[7]),4&a&&x!==(x=!!t[2]||void 0)&&p(e,"data-cropping",x),8&a&&y!==(y=!!t[3]||void 0)&&p(e,"data-dragging",y),32&a&&p(e,"style",t[5])},i:$,o:$,d(r){r&&i(e),t[16](null),w&&w.d()}}}const j="STATE_CROPPED",F="STATE_DEFAULT",M=t=>`${t.x}px ${t.y}px`;function C(t,e,r){let n,a,s,o;const i=m();let l,c,u,d,f,p=!1,h=null,$=null,{src:v}=e;function b(){r(3,p=!1),h&&$&&$.x===h.x&&$.y===h.y&&(r(12,$=null),r(11,h=null))}function x(t){r(3,p=!0),r(12,$=t),r(11,h=t)}function y(t){r(11,h=t)}return t.$$set=t=>{"src"in t&&r(0,v=t.src)},t.$$.update=()=>{if(6144&t.$$.dirty&&r(2,n=!(!h||!$)),14340&t.$$.dirty){const t=c;r(13,c=n?R($,h):null),typeof t==typeof c&&(null==t?void 0:t.bottom)===(null==c?void 0:c.bottom)&&(null==t?void 0:t.left)===(null==c?void 0:c.left)&&(null==t?void 0:t.right)===(null==c?void 0:c.right)&&(null==t?void 0:t.top)===(null==c?void 0:c.top)||i("state",{state:null===c?F:j})}var e;if(8192&t.$$.dirty&&r(15,a=c?I(c):null),8192&t.$$.dirty&&r(6,s=c?(t=>{const{bottom:e,left:r,right:n,top:a}=t,s=M({x:r,y:a}),o=M({x:n,y:a});return`clip-path: polygon(${s}, ${M({x:r,y:e})}, ${M({x:n,y:e})}, ${o});`})(c):""),32768&t.$$.dirty&&r(7,o=a?`left:${(e=a).x}px;top:${e.y}px;width:${e.width}px;height:${e.height}px;`:""),6146&t.$$.dirty)if(l&&h&&$){const t={width:l.width,height:l.height},e={width:l.naturalWidth,height:l.naturalHeight};r(4,u=I(O(t,e,$),O(t,e,h)))}else r(4,u=null);16386&t.$$.dirty&&l&&(d&&(d.destroy(),r(14,d=null)),r(14,d=function(t,e={}){let{on_end:r,on_start:n,on_update:a}=e,s=!1;function o(e){if("touchmove"===e.type||"touchstart"===e.type){const r=t.getBoundingClientRect(),n=e.touches[0];return{x:n.clientX-r.x,y:n.clientY-r.y}}return{x:e.offsetX,y:e.offsetY}}function i(t){t.preventDefault(),s=!0,n&&n(o(t))}function l(t){t.preventDefault(),s=!1,r&&r()}function c(t){t.preventDefault(),s&&a&&a(o(t))}function u(t){s=!1}return t.addEventListener("touchstart",i),t.addEventListener("mousedown",i),t.addEventListener("touchend",l),t.addEventListener("mouseup",l),t.addEventListener("touchmove",c),t.addEventListener("mousemove",c),t.addEventListener("mouseleave",u),{destroy(){t.removeEventListener("touchstart",i),t.removeEventListener("mousedown",i),t.removeEventListener("touchend",l),t.removeEventListener("mouseup",l),t.removeEventListener("touchmove",c),t.removeEventListener("mousemove",c),t.removeEventListener("mouseleave",u)},update(t={}){({on_end:r,on_start:n,on_update:a}=t)}}}(l,{on_end:b,on_start:x,on_update:y}))),2&t.$$.dirty&&(l?l.addEventListener("load",(()=>r(5,f=l?`max-height:${l.height}px;`:""))):r(5,f=""))},[v,l,n,p,u,f,s,o,async function(){const t=await fetch(v),e=await t.blob();return n?T(e,u):e},function(){return n},function(){r(11,h=null),r(12,$=null)},h,$,c,d,a,function(t){g[t?"unshift":"push"]((()=>{l=t,r(1,l)}))}]}class N extends t{constructor(t){super(),e(this,t,C,P,r,{src:0,get_cropped_blob:8,is_cropping:9,reset:10})}get get_cropped_blob(){return this.$$.ctx[8]}get is_cropping(){return this.$$.ctx[9]}get reset(){return this.$$.ctx[10]}}function V(t){let e,r,m,g,x,y,w;return{c(){e=l("label"),r=l("code"),m=n(t[0]),g=c(),x=l("input"),this.h()},l(n){e=u(n,"LABEL",{});var s=d(e);r=u(s,"CODE",{});var o=d(r);m=a(o,t[0]),o.forEach(i),g=f(s),x=u(s,"INPUT",{type:!0}),s.forEach(i),this.h()},h(){p(x,"type","text")},m(n,a){s(n,e,a),h(e,r),h(r,m),h(e,g),h(e,x),v(x,t[1]),y||(w=b(x,"input",t[3]),y=!0)},p(t,[e]){1&e&&o(m,t[0]),2&e&&x.value!==t[1]&&v(x,t[1])},i:$,o:$,d(t){t&&i(e),y=!1,w()}}}function Y(t,e,r){let{default:n}=e,{variable:a}=e,s=n;return t.$$set=t=>{"default"in t&&r(2,n=t.default),"variable"in t&&r(0,a=t.variable)},t.$$.update=()=>{3&t.$$.dirty&&document.body.style.setProperty(a,s)},[a,s,n,function(){s=this.value,r(1,s)}]}class z extends t{constructor(t){super(),e(this,t,Y,V,r,{default:2,variable:0})}}function A(t){let e,r,o;return{c(){e=l("div"),r=l("p"),o=n("Your client currently does not support Javascript, or is otherwise disabled."),this.h()},l(t){e=u(t,"DIV",{class:!0});var n=d(e);r=u(n,"P",{});var s=d(r);o=a(s,"Your client currently does not support Javascript, or is otherwise disabled."),s.forEach(i),n.forEach(i),this.h()},h(){p(e,"class","card")},m(t,n){s(t,e,n),h(e,r),h(r,o)},p:$,i:$,o:$,d(t){t&&i(e)}}}function G(t){let e,r,o,$,m,g,v,x,D,T,I,R,O,U,P,j,M,C,V,Y,A,G,J,X,H,K,W,q,Q,Z,tt,et,rt,nt,at,st,ot,it,lt,ct,ut,dt,ft,pt,ht,$t,mt,gt,vt,bt,xt={src:t[1]};return e=new N({props:xt}),t[7](e),e.$on("state",t[6]),J=new z({props:{variable:"--image-crop-cursor-dragging",default:"crosshair"}}),H=new z({props:{variable:"--image-crop-cursor-hover",default:"se-resize"}}),Q=new z({props:{variable:"--image-crop-background-filter-cropping",default:"blur(1px) brightness(65%)"}}),rt=new z({props:{variable:"--image-crop-selection-border",default:"4px dashed whitesmoke"}}),at=new z({props:{variable:"--image-crop-selection-color",default:"whitesmoke"}}),ot=new z({props:{variable:"--image-crop-selection-filter",default:"drop-shadow(0px 0px 6px black)"}}),ut=new z({props:{variable:"--image-crop-selection-font-family",default:"inherit"}}),ft=new z({props:{variable:"--image-crop-selection-font-size",default:"1rem"}}),ht=new z({props:{variable:"--image-crop-selection-font-weight",default:"900"}}),{c(){E(e.$$.fragment),r=c(),o=l("div"),$=l("button"),m=n("reset"),v=c(),x=l("button"),D=n("clear"),I=c(),R=l("button"),O=n("commit"),P=c(),j=l("br"),M=c(),C=l("fieldset"),V=l("legend"),Y=n("Customize"),A=c(),G=l("p"),E(J.$$.fragment),X=c(),E(H.$$.fragment),K=c(),W=l("br"),q=c(),E(Q.$$.fragment),Z=c(),tt=l("br"),et=c(),E(rt.$$.fragment),nt=c(),E(at.$$.fragment),st=c(),E(ot.$$.fragment),it=c(),lt=l("br"),ct=c(),E(ut.$$.fragment),dt=c(),E(ft.$$.fragment),pt=c(),E(ht.$$.fragment),$t=c(),mt=l("br"),this.h()},l(t){L(e.$$.fragment,t),r=f(t),o=u(t,"DIV",{class:!0});var n=d(o);$=u(n,"BUTTON",{class:!0,disabled:!0});var s=d($);m=a(s,"reset"),s.forEach(i),v=f(n),x=u(n,"BUTTON",{class:!0,disabled:!0});var l=d(x);D=a(l,"clear"),l.forEach(i),I=f(n),R=u(n,"BUTTON",{class:!0,disabled:!0});var c=d(R);O=a(c,"commit"),c.forEach(i),n.forEach(i),P=f(t),j=u(t,"BR",{}),M=f(t),C=u(t,"FIELDSET",{});var p=d(C);V=u(p,"LEGEND",{});var h=d(V);Y=a(h,"Customize"),h.forEach(i),A=f(p),G=u(p,"P",{});var g=d(G);L(J.$$.fragment,g),X=f(g),L(H.$$.fragment,g),K=f(g),W=u(g,"BR",{}),q=f(g),L(Q.$$.fragment,g),Z=f(g),tt=u(g,"BR",{}),et=f(g),L(rt.$$.fragment,g),nt=f(g),L(at.$$.fragment,g),st=f(g),L(ot.$$.fragment,g),it=f(g),lt=u(g,"BR",{}),ct=f(g),L(ut.$$.fragment,g),dt=f(g),L(ft.$$.fragment,g),pt=f(g),L(ht.$$.fragment,g),g.forEach(i),p.forEach(i),$t=f(t),mt=u(t,"BR",{}),this.h()},h(){p($,"class","button secondary is-full-width"),$.disabled=g=t[1]===S,p(x,"class","button error is-full-width"),x.disabled=T=t[2]===F,p(R,"class","button primary is-full-width"),R.disabled=U=t[2]===F,p(o,"class","grouped gapless")},m(n,a){_(e,n,a),s(n,r,a),s(n,o,a),h(o,$),h($,m),h(o,v),h(o,x),h(x,D),h(o,I),h(o,R),h(R,O),s(n,P,a),s(n,j,a),s(n,M,a),s(n,C,a),h(C,V),h(V,Y),h(C,A),h(C,G),_(J,G,null),h(G,X),_(H,G,null),h(G,K),h(G,W),h(G,q),_(Q,G,null),h(G,Z),h(G,tt),h(G,et),_(rt,G,null),h(G,nt),_(at,G,null),h(G,st),_(ot,G,null),h(G,it),h(G,lt),h(G,ct),_(ut,G,null),h(G,dt),_(ft,G,null),h(G,pt),_(ht,G,null),s(n,$t,a),s(n,mt,a),gt=!0,vt||(bt=[b($,"click",t[5]),b(x,"click",t[3]),b(R,"click",t[4])],vt=!0)},p(t,r){const n={};2&r&&(n.src=t[1]),e.$set(n),(!gt||2&r&&g!==(g=t[1]===S))&&($.disabled=g),(!gt||4&r&&T!==(T=t[2]===F))&&(x.disabled=T),(!gt||4&r&&U!==(U=t[2]===F))&&(R.disabled=U)},i(t){gt||(y(e.$$.fragment,t),y(J.$$.fragment,t),y(H.$$.fragment,t),y(Q.$$.fragment,t),y(rt.$$.fragment,t),y(at.$$.fragment,t),y(ot.$$.fragment,t),y(ut.$$.fragment,t),y(ft.$$.fragment,t),y(ht.$$.fragment,t),gt=!0)},o(t){w(e.$$.fragment,t),w(J.$$.fragment,t),w(H.$$.fragment,t),w(Q.$$.fragment,t),w(rt.$$.fragment,t),w(at.$$.fragment,t),w(ot.$$.fragment,t),w(ut.$$.fragment,t),w(ft.$$.fragment,t),w(ht.$$.fragment,t),gt=!1},d(n){t[7](null),k(e,n),n&&i(r),n&&i(o),n&&i(P),n&&i(j),n&&i(M),n&&i(C),k(J),k(H),k(Q),k(rt),k(at),k(ot),k(ut),k(ft),k(ht),n&&i($t),n&&i(mt),vt=!1,B(bt)}}}function J(t){let e,r,n,a;const o=[G,A],l=[];return e=0,r=l[0]=o[0](t),{c(){r.c(),n=x()},l(t){r.l(t),n=x()},m(t,e){l[0].m(t,e),s(t,n,e),a=!0},p(t,[e]){r.p(t,e)},i(t){a||(y(r),a=!0)},o(t){w(r),a=!1},d(t){l[0].d(t),t&&i(n)}}}const S=`${D}/assets/images/jung-ho-park-sYiKL1JEOEk-unsplash.jpg`;function X(t,e,r){let n,a,s=S,o=F;return[a,s,o,function(t){a.reset()},async function(t){n=await a.get_cropped_blob(),r(1,s=URL.createObjectURL(n)),a.reset()},function(t){s!==S&&URL.revokeObjectURL(s),n=null,r(1,s=S),a.reset()},function(t){r(2,o=t.detail.state)},function(t){g[t?"unshift":"push"]((()=>{a=t,r(0,a)}))}]}export default class extends t{constructor(t){super(),e(this,t,X,J,r,{})}}
